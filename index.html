<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Swell</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet'>
    <link rel="stylesheet" href="ui_modules/codemirror/lib/codemirror.css">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="ui_modules/codemirror/lib/codemirror.js"></script>
    <script src="ui_modules/codemirror/addon/display/placeholder.js"></script>
    <script src="ui_modules/codemirror/addon/selection/mark-selection.js"></script>
    <script src="ui_modules/codemirror/addon/edit/matchbrackets.js"></script>
    <script src="ui_modules/codemirror/addon/edit/closebrackets.js"></script>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="sidenav col-md-1">
                <div class="row">
                    <span id="logo">SWELL</span>
                </div>
                <div class="row achievement-container">
                    <div class="col-4">
                        <img src="pics/star.svg" class="icon" alt="yellow star" height="25px" width="25px" />
                    </div>
                    <div class="col">
                        <span id="achievement"></span>
                    </div>
                </div>
                <!-- Lessons -->
                <div id="lesson-accordion">
                </div>
            </div>

            <div class="main-container col-md">
                <div class="row label-container">
                    <div class="col-md-6">
                        <div class="label">CODE</div>
                    </div>
                    <div class="col-md">
                        <div class="label">CANVAS</div>
                    </div>
                </div>
                <div id="code-canvas-container" class="row">
                    <div id="code-editor" class="col-md-6">
                        <textarea id="input-textarea" placeholder="//code goes here"></textarea>
                    </div>

                    <div id="canvas-container" class="col-md">
                        <canvas id='output'></canvas>
                        <div id='popup' class='instruction'>
                            <p> You need to complete the goal using only the CODE area to the left! </p>
                            <p> Don't remember how? Refresh your memory by going back to the last checkpoint:
                                <button id='prev'> Last Checkpoint </button>
                        </div>
                    </div>
                </div>

                <div class="row label-container">
                    <div class="col-md-10">
                        <div id="instr-label" class="label">MESSAGE</div>
                    </div>
                    <div class="col-md">
                    </div>
                </div>
                <div id="terminal-reward-container" class="row">
                    <div class="col-md-10">
                        <div id="message" class="mid-col-2nd-row-container">
                            <p>Welcome to Swell! Let's learn how to code!</p>
                            <p>What is coding? Well, computers can do wonderful things, but they unfortunately don't understand English.</p>
                            <p>To tell a computer what we want it to do, we need to communicate with it in a language that it understands.</p>
                            <p>That's basically what coding is: to communicate with computers, by writing in a language they understand!</p>
                        </div>
                        <div id="replay" class="mid-col-2nd-row-container"></div>
                    </div>
                    <div class="col-md">
                        <div id="reward-container" class="mid-col-2nd-row-container">
                            <div id="reward-text" class="reward">Select a lesson to earn a star!</div>
                            <img id="reward-image" src="pics/greystar.svg" class="star" alt="a star to be earned" height="50px" width="50px" />
                            <button id="next" class="btn next">Next</button>
                            <button id="reset" type="button" class="btn">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

        <div class="sidenav col-md-auto">
          <div id="toolbox-container">
                <button type="button" class="btn btn-block btn-sm" data-toggle="collapse" data-target="#color">
                        Colors</button>
                <div id="color" class="collapse">
                    <div class="color orange"></div>
                    <div class="color red"></div>
                    <div class="color yellow"></div>
                    <div class="color lime"></div>
                    <div class="color mediumaquamarine"></div>
                    <div class="color green"></div>
                    <div class="color blue"></div>
                    <div class="color pink"></div>
                    <div class="color brown"></div>
                    <div class="color purple"></div>
                    <div class="color blackandwhite"></div>
                    <div class="color rainbow"></div>
                </div>
            <button type="button" class="btn btn-block btn-sm" id='string'>Word</button>
            <button type="button" class="btn btn-block btn-sm" id='number'>Number</button>
            <button type="button" class="btn btn-block btn-sm" id='ellipse'>Ellipse</button>
            <button type="button" class="btn btn-block btn-sm" id='rect'>Rectangle</button>
            <button type="button" class="btn btn-block btn-sm" id='line'>Line</button>
            <button type="button" class="btn btn-block btn-sm" data-toggle="collapse" data-target="#emoji">
                Emoji
            </button>
            <button type="button" class="btn btn-block btn-sm" id='delete'>Delete</button>
            <div id="emoji" class="collapse">
              <button id="happy" class="btn btn-block checkpoint">happy</button>
              <button id="sad" class="btn btn-block checkpoint">sad</button>
              <button id="angry" class="btn btn-block checkpoint">angry</button>
              <button id="cool" class="btn btn-block checkpoint">cool</button>
            </div>
            
            <div class='color-wheel'>
                <div id='rainbow-wheel'></div>
                <div id='black&white-wheel'></div>
            </div>
          </div>
          <div class="end">
              <div>
              </div>
              <input type="password" id="password" name="password" class="end-password">
              <button type="button" class="btn btn-block btn-sm" id="end">End</button>
          </div>
        </div>
      </div>
    </div>

    <script>
        (function() {
            let cm = CodeMirror.fromTextArea(document.getElementById("input-textarea"), {
                lineNumbers: true,
                autofocus: true,
                matchBrackets: true,
                autoCloseBrackets: true
            });
            let editor = cm.getWrapperElement();
            editor.setAttribute("id", "input");

            // Make canvas responsive
            let canvas = document.querySelector("canvas");
            resizeCanvas = function() {
                canvas.height = parseInt(editor.clientHeight);
                canvas.width = parseInt(editor.clientWidth * 0.98);
            };
            document.getElementsByTagName("body")[0].onresize = resizeCanvas;
            resizeCanvas();
        })();

        //disable the end button initially
        let pwd = document.getElementById("password");
        let end = document.getElementById("end");
        end.style.background = "#D8D8D8";
        end.disabled = true;

        //enable the button if the password matches
        pwd.onkeyup = function() {
            if (pwd.value === "provolone") {
                end.style.background = "#673AB7";
                end.disabled = false;
            } else {
                end.style.background = "#D8D8D8";
                end.disabled = true;
            }
        }

        end.onclick = function() {
            location.href = "posttest.html";
        }
    </script>
    <script src='browserui.js'></script>
</body>

</html>
